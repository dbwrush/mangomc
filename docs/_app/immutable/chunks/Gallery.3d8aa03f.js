import{S as q,i as J,s as K,J as y,k as H,l as L,O as E,b as R,K as Q,H as W,h as m,P as C,M as tt,m as z,n as b,p as D,Q as M,R as et,G as T,T as nt,g as v,v as X,f as Y,d as k,U as st,V as ot,C as it,a as rt,c as at,D as lt,E as ct,F as ht,x as P,y as S,e as G,z as ut,A as B,L as ft,B as U}from"./index.e927fd09.js";function _t(e){let t,n=[e[0]],o={};for(let r=0;r<n.length;r+=1)o=y(o,n[r]);return{c(){t=H("img"),this.h()},l(r){t=L(r,"IMG",{}),this.h()},h(){E(t,o)},m(r,c){R(r,t,c)},p(r,[c]){E(t,o=Q(n,[c&1&&r[0]]))},i:W,o:W,d(r){r&&m(t)}}}function dt(e,t,n){const o=[];let r=C(t,o);return e.$$set=c=>{t=y(y({},t),tt(c)),n(0,r=C(t,o))},[r]}class gt extends q{constructor(t){super(),J(this,t,dt,_t,K,{})}}const F={single_source_shortest_paths:function(e,t,n){var o={},r={};r[t]=0;var c=new Z(function(g){return g.cost});c.push({value:t,cost:0});for(var i,l,s,a,h,_,f,u;c.size();){i=c.pop(),l=i.value,s=i.cost,a=e(l)||{};for(var d in a)h=a[d],_=s+h,f=r[d],u=typeof r[d]>"u",(u||f>_)&&(r[d]=_,c.push({value:d,cost:_}),o[d]=l)}if(typeof r[n]>"u"){var p=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(p)}return o},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],o=t;o;)n.push(o),e[o],o=e[o];return n.reverse(),n},find_path:function(e,t,n){var o=F.single_source_shortest_paths(e,t,n);return F.extract_shortest_path_from_predecessor_list(o,n)}};function Z(e){this.content=[],this.scoreFunction=e}Z.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},remove:function(e){for(var t=this.content.length,n=0;n<t;n++)if(this.content[n]===e){var o=this.content.pop();n!==t-1&&(this.content[n]=o,this.scoreFunction(o)<this.scoreFunction(e)?this.bubbleUp(n):this.sinkDown(n));return}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e];e>0;){var n=Math.floor((e+1)/2)-1,o=this.content[n];if(this.scoreFunction(t)<this.scoreFunction(o))this.content[n]=t,this.content[e]=o,e=n;else break}},sinkDown:function(e){for(var t=this.content.length,n=this.content[e],o=this.scoreFunction(n);;){var r=(e+1)*2,c=r-1,i=null;if(c<t){var l=this.content[c],s=this.scoreFunction(l);s<o&&(i=c)}if(r<t){var a=this.content[r],h=this.scoreFunction(a);h<(i===null?o:s)&&(i=r)}if(i!=null)this.content[e]=this.content[i],this.content[i]=n,e=i;else break}}};function I(e){return Math.round(e*100+Number.EPSILON)/100}function N(e,t){return I(e/t)}function mt(e,t){return I(e/t)}function pt(e,t){return I(e*t)}function x(e,t,n){const o=t-(e.length-1)*n,r=e.reduce((c,{ratio:i})=>c+i,0);return mt(o,r)}function vt(e,t,n,o,r,c){const i=e.slice(t,n),l=x(i,o,c);return Math.pow(Math.abs(l-r),2)}function wt(e,t){if(e<420)return 2;const n=N(e,t)/.75;return Math.round(n*1.5)}function bt({images:e,containerWidth:t,targetHeight:n,gutter:o=2,seekLimit:r=wt,byRow:c=!1}={}){const i=e.map((f,u)=>({...f,index:u,ratio:N(f.width,f.height)})),l=r(t,n),s=f=>{const u={};f=+f,u[f]=0;for(let d=f+1;d<i.length+1&&!(d-f>l);++d)u[""+d]=vt(i,f,d,t,n,o);return u},a=F.find_path(s,"0",i.length),h=[],_=[];for(let f=0;f<a.length;f++)if(a[f+1]){const u=i.slice(+a[f],+a[f+1]),d=f===a.length-2,p=x(u,t,o);u.forEach((g,w)=>{g.scaledWidth=pt(p,g.ratio),g.scaledHeight=p,g.scaledWidthPc=I(g.scaledWidth/t*100),w===u.length-1&&(g.isLastInRow=!0),g.isLastRow=d,_.push(g)}),h.push(u)}return c?h:_}function V(e,t,n){const o=e.slice();return o[10]=t[n].index,o[11]=t[n].ratio,o[12]=t[n].scaledHeight,o[13]=t[n].scaledWidth,o[14]=t[n].isLastInRow,o[15]=t[n].isLastRow,o[16]=t[n].scaledWidthPc,o[17]=ot(t[n],["index","ratio","scaledHeight","scaledWidth","isLastInRow","isLastRow","scaledWidthPc"]),o}const kt=e=>({index:e&4,image:e&4}),A=e=>({index:e[10],image:e[17]});function yt(e){let t,n,o;const r=[e[17]];var c=e[0];function i(l){let s={};for(let a=0;a<r.length;a+=1)s=y(s,r[a]);return{props:s}}return c&&(t=P(c,i())),{c(){t&&S(t.$$.fragment),n=G()},l(l){t&&ut(t.$$.fragment,l),n=G()},m(l,s){t&&B(t,l,s),R(l,n,s),o=!0},p(l,s){const a=s&4?Q(r,[ft(l[17])]):{};if(s&1&&c!==(c=l[0])){if(t){X();const h=t;k(h.$$.fragment,1,0,()=>{U(h,1)}),Y()}c?(t=P(c,i()),S(t.$$.fragment),v(t.$$.fragment,1),B(t,n.parentNode,n)):t=null}else c&&t.$set(a)},i(l){o||(t&&v(t.$$.fragment,l),o=!0)},o(l){t&&k(t.$$.fragment,l),o=!1},d(l){l&&m(n),t&&U(t,l)}}}function O(e){let t,n,o,r;const c=e[8].default,i=it(c,e,e[7],A),l=i||yt(e);return{c(){t=H("div"),l&&l.c(),n=rt(),this.h()},l(s){t=L(s,"DIV",{class:!0,style:!0});var a=z(t);l&&l.l(a),n=at(a),a.forEach(m),this.h()},h(){b(t,"class","image svelte-164jz8u"),b(t,"style",o=e[3]({scaledHeight:e[12],scaledWidth:e[13],isLastInRow:e[14],isLastRow:e[15]}))},m(s,a){R(s,t,a),l&&l.m(t,null),T(t,n),r=!0},p(s,a){i?i.p&&(!r||a&132)&&lt(i,c,s,s[7],r?ht(c,s[7],a,kt):ct(s[7]),A):l&&l.p&&(!r||a&5)&&l.p(s,r?a:-1),(!r||a&4&&o!==(o=s[3]({scaledHeight:s[12],scaledWidth:s[13],isLastInRow:s[14],isLastRow:s[15]})))&&b(t,"style",o)},i(s){r||(v(l,s),r=!0)},o(s){k(l,s),r=!1},d(s){s&&m(t),l&&l.d(s)}}}function Ht(e){let t,n,o,r,c=e[2],i=[];for(let s=0;s<c.length;s+=1)i[s]=O(V(e,c,s));const l=s=>k(i[s],1,1,()=>{i[s]=null});return{c(){t=H("div"),n=H("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){t=L(s,"DIV",{class:!0});var a=z(t);n=L(a,"DIV",{class:!0,style:!0});var h=z(n);for(let _=0;_<i.length;_+=1)i[_].l(h);h.forEach(m),a.forEach(m),this.h()},h(){b(n,"class","container svelte-164jz8u"),D(n,"width",e[1]+"px"),M(n,"hidden",!e[1]),b(t,"class","masonry svelte-164jz8u"),et(()=>e[9].call(t))},m(s,a){R(s,t,a),T(t,n);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(n,null);o=nt(t,e[9].bind(t)),r=!0},p(s,[a]){if(a&141){c=s[2];let h;for(h=0;h<c.length;h+=1){const _=V(s,c,h);i[h]?(i[h].p(_,a),v(i[h],1)):(i[h]=O(_),i[h].c(),v(i[h],1),i[h].m(n,null))}for(X(),h=c.length;h<i.length;h+=1)l(h);Y()}(!r||a&2)&&D(n,"width",s[1]+"px"),(!r||a&2)&&M(n,"hidden",!s[1])},i(s){if(!r){for(let a=0;a<c.length;a+=1)v(i[a]);r=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)k(i[a]);r=!1},d(s){s&&m(t),st(i,s),o()}}}function Lt(e,t,n){let{$$slots:o={},$$scope:r}=t,{images:c=[]}=t,{rowHeight:i=220}=t,{gutter:l=8}=t,{imageComponent:s=gt}=t,a=[],h=0;function _({scaledWidth:u,scaledHeight:d,isLastInRow:p,isLastRow:g}){let w=l+"px",j=`0 0 ${u}px`,$=g?"0":w;return p&&(w="0",j=`1 1 ${u-4}px`),`height: ${d}px; flex: ${j}; margin-right: ${w}; margin-bottom: ${$};`}function f(){h=this.clientWidth,n(1,h)}return e.$$set=u=>{"images"in u&&n(4,c=u.images),"rowHeight"in u&&n(5,i=u.rowHeight),"gutter"in u&&n(6,l=u.gutter),"imageComponent"in u&&n(0,s=u.imageComponent),"$$scope"in u&&n(7,r=u.$$scope)},e.$$.update=()=>{e.$$.dirty&114&&n(2,a=bt({images:c,containerWidth:h||1280,targetHeight:i,gutter:l}))},[s,h,a,_,c,i,l,r,o,f]}class It extends q{constructor(t){super(),J(this,t,Lt,Ht,K,{images:4,rowHeight:5,gutter:6,imageComponent:0})}}export{It as G};
